<div class="row">
    <div class="col-md-4 col-sm-12 t" *ngFor="let tecnico of tecnicos$ | async; let i = index">
      <ba-card>
        <div class="text-center">
          <img *ngIf="tecnico?.foto_url" [src]="tecnico?.foto_url" alt="Foto técnico">
          <img *ngIf="!tecnico?.foto_url" src="/assets/img/avatar.png">
          <h4>{{ tecnico?.nome }}</h4>
          <h6 *ngIf="tecnico?.estado === 'em_deslocamento'" >Em deslocamento</h6>
          <h6 *ngIf="tecnico?.estado === 'chegou_ao_destino'" >Chegou no cliente</h6>
          <h6 *ngIf="tecnico?.estado === 'inicio_atendimento'">Atendimento iniciado</h6>
          <h6 *ngIf="!tecnico?.estado">Disponível</h6>
        </div>
        <hr [ngClass]="{'em_deslocamento': tecnico?.estado === 'em_deslocamento',
                        'chegou_ao_destino': tecnico?.estado === 'chegou_ao_destino',
                         'inicio_atendimento': tecnico?.estado === 'inicio_atendimento' }">
        <div class="table table">
            <table class="table">
              <thead>
                <tr class="border-top: none">
                  <th>Atendimentos</th>
                  <th>Avaliação</th>
                  <th>Concluídos</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-top: none">
                  <td><i class="ion-settings"></i> {{ tecnico?.atendimentos?.length || 0}}</td>
                  <td *ngIf="tecnico?.atendimentos_hoje"><i [ngClass]="{'ion-ios-star-half': tecnico?.media > 0, 'ion-star': tecnico?.media >= 2.5, 'ion-trophy': tecnico?.media === 5, 'ion-ios-star-outline': tecnico?.media === 0}"></i> {{ tecnico?.media || 0  | number: '1.2-2'}}</td>
                  <td *ngIf="tecnico?.atendimentos_hoje"><i class="ion-checkmark"></i> {{ tecnico?.concluido?.length || 0 }} / {{ tecnico?.atendimentos_hoje?.length }}</td>
                </tr>
              </tbody>
            </table>
            <div class="m-3" *ngFor="let atendimento of tecnico?.atendimentos_hoje" >
              <p><i [ngClass]="{'ion-checkmark': atendimento?.estado === 'fim_do_atendimento',
                                'ion-model-s': atendimento?.estado === 'em_deslocamento',
                                'ion-location': atendimento?.estado === 'chegou_ao_destino',
                                'ion-wrench': atendimento?.estado === 'inicio_atendimento',
                                'ion-bookmark': atendimento?.estado === 'associado'}"></i> {{atendimento.cliente.nome_razao_social}}</p>
            </div>
          </div>
      </ba-card>
    </div>
  </div>

